# =================================
# 生产环境配置文件示例
# 复制为 .env.prod 并填入真实值
# =================================

# === 应用基础配置 ===
ENVIRONMENT=production
PROJECT_NAME="FastAPI Backend"
VERSION="1.0.0"

# === 数据库配置 ===
POSTGRES_HOST=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change_me_strong
POSTGRES_DB=postgres
POSTGRES_PORT=5432

# === 安全配置 ===
SECRET_KEY=please-change-to-a-long-random-string
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
ALGORITHM=HS256

# === 服务端口配置 ===
BACKEND_PORT=8000
FRONTEND_PORT=3000

# === Redis配置 ===
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# === RabbitMQ配置 ===
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_VHOST=/
RABBITMQ_PLUGIN_PORT=15672

# === TaskIQ配置 ===
TASKIQ_WORKER_CONCURRENCY=2
LOG_LEVEL=WARNING

# === PgAdmin配置 ===
PGADMIN_DEFAULT_EMAIL=admin@yourdomain.com
PGADMIN_DEFAULT_PASSWORD=please_change
PGADMIN_CONFIG_SERVER_MODE=True
PGADMIN_CONFIG_ENHANCED_COOKIE_PROTECTION=True
PGADMIN_CONFIG_WTF_CSRF_ENABLED=True

# === 动态 Nginx 配置（必填）===
DOMAIN_MAIN=yourdomain.com
SUBDOMAIN_PORTAINER=portainer
SUBDOMAIN_PGADMIN=pgadmin
SUBDOMAIN_REDIS=redis

# 是否启用 IP 白名单
ENABLE_IP_RESTRICTION=true
ALLOWED_IP_HOME=203.0.113.100
ALLOWED_IP_OFFICE=198.51.100.50

# === Cloudflare 真实 IP 动态刷新（可选）===
# 是否定期刷新 Cloudflare IP 列表并自动重载 Nginx
# 建议启用，确保白名单与官方同步
CF_IP_REFRESH_ENABLED=true
# 刷新间隔（秒），默认每天刷新一次
CF_IP_REFRESH_INTERVAL=86400

# === 前端 URL（用于前端构建注入 API 地址）===
FRONTEND_URL=https://yourdomain.com

# === 证书文件命名（固定文件名，无需环境变量）===
# 请将证书放置于：
# nginx/ssl/server.pem
# nginx/ssl/server.key
